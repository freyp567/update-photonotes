# update-photonotes

Update my personal photo-notes from Flickr in Evernote.

## Description

update-photo0notes is a commandline based application that requires the backup database generated by evernote-backup, 
referred to in the following description as en_backup.db.

## Photo-notes

Here is a concrete example of one of my photo-notes. It is on an image that can be found on Flickr under
[Abyssinian Roller](https://www.flickr.com/photos/rod_waddington/49889542513/)

... and is one of the excellent pictures that are made available with a permissive license (Creative Commons)
so I picked this one for an example as I may share and adapt the image under the CC BY-SA 2.0 license set.



## Actions

update-photonotes currently provides  two actions:

### update 

Extend the en_backup.db database by providing additional tables for inventory of the existing photo-notes in en_backup.db
and update them from Flickr.

The main issue with update is, that there needs to be a reliable way to identify the Flickr image a photo-note is 
relating to. A note may contain many HTML links (<a href=...> Elements), but which one is the one identifying the image
described?

The update action has to rely on heuristics, I choose the following one:
First, every note must contain a line starting with "See: " and followed by a highlighted reference to the image.
Secnodly, there must also be a HTML link for this image in the note, to be the last photo URL.

Currently I still am busy with the job to make all my photo-notes complient to these two rules.
Update currently scans all photo-notes tagged 'flickr-image' in en_backup.db and complains if the expectations are not met.
Sureley it takes some time to update all notes that do not fit, but I hope the result will be worth that effort.


### create-note

There are two variants of photo-notes: The basic one is self-contained, keeping all informatino on image and photo owner
in a single note. That is ok if there are one, two images from a specific owner, and used in these cases.

There is also an extended variant, where one note is on the photo-owner, a so-called blog note, 
ond several additional notes for each image I found of interest or worth taking a note for on separate notes.
The notes are linked, with the means of cross note linking supported by Evernote, with the blog note
containing a list of images, so it is easy to navigate from blog to image and back again.

The action create-note can create both variants. depending on the URL that is passed.
If it is https://www.flickr.com/people/(blog-id), then a blog note is created for it.
If it is https://www.flickr.com/photos/(blog-id)/(photo-id)/(optional-context), then a photo note will be 
created with the info on the photo owner respectiviy the blog on top. 

For time beeing converting a self-contained photo-note to one with blog / photo relationship is easy and not much work,
so there is no effort taken to differentiate that, but that may something I will change and improve in the future.


## Limitations

Use of the Flickr API is under some restrictions defined by the Agreements you have to confirm.
One of them is to limit the number of API calls per hour to be below 3.600 calls. So use the tool with care,
in spite of the attemts made to ensure that rate limit accessing the Flickr API stays below.

Also you will need your own Flickr API keys, but it should be easy to apply for and obtain them.
For details see [The App Garden](https://www.flickr.com/services/api/).

You will also need an up-to-date python environment, with poetry on board.
The documentation for poetry is here: 
[Poetry - Pyton dependency managenent and packaging made easyi](https://python-poetry.org/docs/#installing-with-the-official-installer).


## Background / Motivation

Since a couple of years I already collect notes on excellent and interesting photos I find in Flickr.
The notes are created using Evernote Webclipper, then adapted and enhaced by adding more content
and information that is essential to find the image again later on ... e.g. some location info,
if possible the introductory sentence from Wikipedia. And not to forget tagging, where I do not just want to take
the tags provided by the photo owners but put own effort in tagging, what produces a better quality and support tp 
search for images later on.

So focus was on how to create photo-notes and be able to search then efficiently. An Evernote is actually still 
my preferred tool for note-taking, because of the search functionality it provides.

But this manual note-taking approach has some drawbacks. The format produced by Webclipper is a starting point
but could be improved. Manual formatting the generated notes takes time and is (sometimes) tedious work, so 
my idea was to automate that and focus on the aspects to qualify the notes created to support searching.

Also, I found evernote-backup to be an excellent tool to make a backup of my Evernote notes, having them now as 
cached versions in a local SQLLite database that can be kept in sync easily, and gives the opportunity to access
the SQLLite database for inventory, validation and updating the photo-notes. That was the motivation
to create update-photonotes.

Note that it is a commandline based application that requires some (hopefully minimal) knowledgbe of Python to make
use of it. It still is under active development, as there are a couple of ideas I still want to implement and
improve.